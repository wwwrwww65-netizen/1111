(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{6356:function(t,e,d){Promise.resolve().then(d.bind(d,810))},810:function(t,e,d){"use strict";d.r(e),d.d(e,{default:function(){return o}});var i=d(875),n=d(5393);function o(){let[t,e]=n.useState([]),[d,o]=n.useState("daily");async function s(){e((await (await fetch("/api/admin/backups/list")).json()).backups||[])}async function r(){await fetch("/api/admin/backups/run",{method:"POST"}),await s()}async function l(t){await fetch("/api/admin/backups/".concat(t,"/restore"),{method:"POST"}),await s()}async function a(){await fetch("/api/admin/backups/schedule",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({schedule:d})})}return n.useEffect(()=>{s()},[]),(0,i.jsxs)("main",{children:[(0,i.jsx)("h1",{style:{marginBottom:16},children:"النسخ الاحتياطي"}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[(0,i.jsx)("button",{onClick:r,style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"تشغيل نسخة"}),(0,i.jsxs)("select",{value:d,onChange:t=>o(t.target.value),style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"},children:[(0,i.jsx)("option",{value:"daily",children:"تشغيل يومي"}),(0,i.jsx)("option",{value:"off",children:"إيقاف"})]}),(0,i.jsx)("button",{onClick:a,style:{padding:"8px 12px",background:"#374151",color:"#e5e7eb",borderRadius:8},children:"حفظ الجدولة"})]}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"#"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"التاريخ"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الحالة"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الحجم"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الموقع"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"إجراءات"})]})}),(0,i.jsx)("tbody",{children:t.map(t=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:t.id.slice(0,6)}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:new Date(t.createdAt).toLocaleString()}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:t.status}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:t.sizeBytes?Math.round(t.sizeBytes/1024)+" KB":"-"}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:t.location||"-"}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:(0,i.jsx)("button",{onClick:()=>l(t.id),style:{padding:"6px 10px",background:"#064e3b",color:"#e5e7eb",borderRadius:6},children:"استعادة"})})]},t.id))})]})]})}}},function(t){t.O(0,[64,694,744],function(){return t(t.s=6356)}),_N_E=t.O()}]);