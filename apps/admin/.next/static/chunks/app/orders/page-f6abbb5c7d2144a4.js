(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[569],{159:function(e,t,i){Promise.resolve().then(i.bind(i,2287))},2287:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var d=i(875),n=i(5393);function o(){let[e,t]=n.useState(1),[i,o]=n.useState(""),[r,s]=n.useState(""),[a,l]=n.useState([]),[c,p]=n.useState(0);async function h(){var t;let d=new URL(window.location.origin+"/api/admin/orders/list");d.searchParams.set("page",String(e)),d.searchParams.set("limit","20"),i&&d.searchParams.set("status",i),r&&d.searchParams.set("search",r);let n=await fetch(d.toString()),o=await n.json();l(o.orders||[]),p((null===(t=o.pagination)||void 0===t?void 0:t.total)||0)}async function u(e){await fetch("/api/admin/orders/ship",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({orderId:e})}),await h()}async function x(e){await fetch("/api/admin/payments/refund",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({orderId:e})}),await h()}return n.useEffect(()=>{h()},[e]),(0,d.jsxs)("main",{children:[(0,d.jsx)("h1",{style:{marginBottom:16},children:"الطلبات"}),(0,d.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12},children:[(0,d.jsxs)("select",{value:i,onChange:e=>o(e.target.value),style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"},children:[(0,d.jsx)("option",{value:"",children:"الكل"}),(0,d.jsx)("option",{value:"PENDING",children:"قيد الانتظار"}),(0,d.jsx)("option",{value:"PAID",children:"مدفوع"}),(0,d.jsx)("option",{value:"SHIPPED",children:"تم الشحن"}),(0,d.jsx)("option",{value:"DELIVERED",children:"تم التسليم"}),(0,d.jsx)("option",{value:"CANCELLED",children:"ملغي"})]}),(0,d.jsx)("input",{value:r,onChange:e=>s(e.target.value),placeholder:"بحث بالمعرف/البريد",style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,d.jsx)("button",{onClick:()=>{t(1),h()},style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"بحث"})]}),(0,d.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"#"}),(0,d.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الحالة"}),(0,d.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"المستخدم"}),(0,d.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الإجمالي"}),(0,d.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"إجراءات"})]})}),(0,d.jsx)("tbody",{children:a.map(e=>{var t;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.id}),(0,d.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.status}),(0,d.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:null===(t=e.user)||void 0===t?void 0:t.email}),(0,d.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.total}),(0,d.jsxs)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:[(0,d.jsx)("button",{onClick:()=>u(e.id),style:{padding:"6px 10px",background:"#064e3b",color:"#e5e7eb",borderRadius:6,marginInlineEnd:6},children:"شحن"}),(0,d.jsx)("button",{onClick:()=>x(e.id),style:{padding:"6px 10px",background:"#7c2d12",color:"#fff",borderRadius:6},children:"استرداد"})]})]},e.id)})})]})]})}}},function(e){e.O(0,[64,694,744],function(){return e(e.s=159)}),_N_E=e.O()}]);