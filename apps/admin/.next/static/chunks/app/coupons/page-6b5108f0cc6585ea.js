(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{5186:function(e,t,d){Promise.resolve().then(d.bind(d,2775))},2775:function(e,t,d){"use strict";d.r(t),d.d(t,{default:function(){return n}});var i=d(875),o=d(5393);function n(){let[e,t]=o.useState([]),[d,n]=o.useState(""),[r,l]=o.useState("PERCENTAGE"),[a,s]=o.useState("10"),[c,u]=o.useState({});async function p(){let e=await fetch("/api/admin/coupons/list");t((await e.json()).coupons||[])}async function h(){await fetch("/api/admin/coupons",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({code:d,discountType:r,discountValue:Number(a),validFrom:new Date().toISOString(),validUntil:new Date(Date.now()+6048e5).toISOString()})}),n(""),await p()}return o.useEffect(()=>{p()},[]),(0,i.jsxs)("main",{children:[(0,i.jsx)("h1",{style:{marginBottom:16},children:"الكوبونات"}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12},children:[(0,i.jsx)("input",{value:d,onChange:e=>n(e.target.value),placeholder:"CODE",style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,i.jsxs)("select",{value:r,onChange:e=>l(e.target.value),style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"},children:[(0,i.jsx)("option",{value:"PERCENTAGE",children:"PERCENTAGE"}),(0,i.jsx)("option",{value:"FIXED",children:"FIXED"})]}),(0,i.jsx)("input",{type:"number",value:a,onChange:e=>s(e.target.value),placeholder:"Value",style:{width:120,padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,i.jsx)("button",{onClick:h,style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"إنشاء"})]}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الكود"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"النوع"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"القيمة"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"تحرير"})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.code}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.discountType}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:void 0!==c[e.id]?(0,i.jsx)("input",{type:"number",value:c[e.id],onChange:t=>u(d=>({...d,[e.id]:Number(t.target.value)})),style:{width:100,padding:6,borderRadius:6,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}):e.discountValue}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:void 0!==c[e.id]?(0,i.jsx)("button",{onClick:async()=>{await fetch("/api/admin/coupons",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({code:e.code,discountType:e.discountType,discountValue:c[e.id],validFrom:e.validFrom,validUntil:e.validUntil})}),u(t=>{let d={...t};return delete d[e.id],d}),await p()},style:{padding:"6px 10px",background:"#064e3b",color:"#e5e7eb",borderRadius:6},children:"حفظ"}):(0,i.jsx)("button",{onClick:()=>u(t=>({...t,[e.id]:e.discountValue})),style:{padding:"6px 10px",background:"#111827",color:"#e5e7eb",borderRadius:6},children:"تحرير"})})]},e.id))})]})]})}}},function(e){e.O(0,[64,694,744],function(){return e(e.s=5186)}),_N_E=e.O()}]);