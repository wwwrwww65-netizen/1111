(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1676:function(e,t,r){Promise.resolve().then(r.bind(r,9288))},9288:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(875),o=r(5393),i=r(5009);function s(){let[e,t]=o.useState([]),[r,s]=o.useState(""),[c,d]=o.useState(""),[l,a]=o.useState(""),[u,h]=o.useState(1),p=o.useMemo(()=>i.env.NEXT_PUBLIC_API_BASE_URL||window.location.origin.replace("jeeey-manger","jeeeyai"),[]),f=o.useCallback(()=>{if("undefined"==typeof document)return{};let e=document.cookie.match(/(?:^|; )auth_token=([^;]+)/);return e?{Authorization:"Bearer ".concat(decodeURIComponent(e[1]))}:{}},[]);async function x(){let e=new URL("".concat(p,"/api/admin/tickets"));e.searchParams.set("page",String(u)),e.searchParams.set("limit","20"),c&&e.searchParams.set("status",c),l&&e.searchParams.set("search",l),t((await (await fetch(e.toString(),{credentials:"include",headers:{...f()}})).json()).tickets||[])}async function g(){await fetch("".concat(p,"/api/admin/tickets"),{method:"POST",headers:{"content-type":"application/json",...f()},credentials:"include",body:JSON.stringify({subject:r})}),s(""),await x()}return o.useEffect(()=>{x()},[u,p]),(0,n.jsxs)("main",{children:[(0,n.jsx)("h1",{style:{marginBottom:16},children:"الدعم"}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12},children:[(0,n.jsxs)("select",{value:c,onChange:e=>d(e.target.value),style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"},children:[(0,n.jsx)("option",{value:"",children:"الكل"}),(0,n.jsx)("option",{value:"OPEN",children:"مفتوحة"}),(0,n.jsx)("option",{value:"IN_PROGRESS",children:"جارية"}),(0,n.jsx)("option",{value:"CLOSED",children:"مغلقة"})]}),(0,n.jsx)("input",{value:l,onChange:e=>a(e.target.value),placeholder:"بحث بالموضوع",style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,n.jsx)("button",{onClick:()=>{h(1),x()},style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"بحث"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12},children:[(0,n.jsx)("input",{value:r,onChange:e=>s(e.target.value),placeholder:"الموضوع",style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,n.jsx)("button",{onClick:g,style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"إنشاء"})]}),(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"#"}),(0,n.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الموضوع"}),(0,n.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الحالة"}),(0,n.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الأولوية"}),(0,n.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"المستخدم"}),(0,n.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8}})]})}),(0,n.jsx)("tbody",{children:e.map(e=>{var t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.id.slice(0,6)}),(0,n.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.subject}),(0,n.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.status}),(0,n.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.priority}),(0,n.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:(null===(t=e.user)||void 0===t?void 0:t.email)||"-"}),(0,n.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:(0,n.jsx)("a",{href:"/tickets/".concat(e.id),style:{padding:"6px 10px",background:"#374151",color:"#e5e7eb",borderRadius:6},children:"تفاصيل"})})]},e.id)})})]})]})}},5009:function(e,t,r){"use strict";var n,o;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(4634)},4634:function(e){!function(){var t={229:function(e){var t,r,n,o=e.exports={};function i(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function c(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var d=[],l=!1,a=-1;function u(){l&&n&&(l=!1,n.length?d=n.concat(d):a=-1,d.length&&h())}function h(){if(!l){var e=c(u);l=!0;for(var t=d.length;t;){for(n=d,d=[];++a<t;)n&&n[a].run();a=-1,t=d.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new p(e,t)),1!==d.length||l||c(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}},s=!0;try{t[e](i,i.exports,n),s=!1}finally{s&&delete r[e]}return i.exports}n.ab="//";var o=n(229);e.exports=o}()}},function(e){e.O(0,[64,694,744],function(){return e(e.s=1676)}),_N_E=e.O()}]);