(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[35],{6134:function(e,i,d){Promise.resolve().then(d.bind(d,436))},436:function(e,i,d){"use strict";d.r(i),d.d(i,{default:function(){return t}});var s=d(875),n=d(5393);function t(e){var i,d;let{params:t}=e,{id:a}=t,[r,o]=n.useState(null),[l,c]=n.useState(""),[u,p]=n.useState("");async function h(){o((await (await fetch("/api/admin/tickets/".concat(a))).json()).ticket)}async function x(){await fetch("/api/admin/tickets/".concat(a,"/assign"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({userId:l})}),c(""),await h()}async function g(){await fetch("/api/admin/tickets/".concat(a,"/comment"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({message:u})}),p(""),await h()}async function b(){await fetch("/api/admin/tickets/".concat(a,"/close"),{method:"POST"}),await h()}return(n.useEffect(()=>{h()},[a]),r)?(0,s.jsxs)("main",{children:[(0,s.jsxs)("h1",{style:{marginBottom:16},children:["تذكرة: ",r.subject]}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12,marginBottom:16},children:[(0,s.jsxs)("div",{style:{padding:12,border:"1px solid #1c2333",borderRadius:8},children:[(0,s.jsxs)("div",{children:["الحالة: ",r.status]}),(0,s.jsxs)("div",{children:["الأولوية: ",r.priority]}),(0,s.jsxs)("div",{children:["المستخدم: ",(null===(i=r.user)||void 0===i?void 0:i.email)||"-"]}),(0,s.jsxs)("div",{children:["المسند إليه: ",(null===(d=r.assignee)||void 0===d?void 0:d.email)||"-"]}),(0,s.jsxs)("div",{children:["الطلب: ",r.orderId||"-"]}),(0,s.jsx)("button",{onClick:b,style:{marginTop:12,padding:"8px 12px",background:"#7c2d12",color:"#fff",borderRadius:8},children:"إغلاق"})]}),(0,s.jsxs)("div",{style:{padding:12,border:"1px solid #1c2333",borderRadius:8},children:[(0,s.jsx)("h3",{style:{marginBottom:8},children:"إسناد"}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,s.jsx)("input",{value:l,onChange:e=>c(e.target.value),placeholder:"userId",style:{flex:1,padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,s.jsx)("button",{onClick:x,style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"إسناد"})]})]})]}),(0,s.jsxs)("div",{style:{padding:12,border:"1px solid #1c2333",borderRadius:8,marginBottom:12},children:[(0,s.jsx)("h3",{style:{marginBottom:8},children:"إضافة تعليق"}),(0,s.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,s.jsx)("input",{value:u,onChange:e=>p(e.target.value),placeholder:"اكتب تعليق...",style:{flex:1,padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,s.jsx)("button",{onClick:g,style:{padding:"8px 12px",background:"#374151",color:"#e5e7eb",borderRadius:8},children:"إرسال"})]})]}),(0,s.jsxs)("div",{style:{padding:12,border:"1px solid #1c2333",borderRadius:8},children:[(0,s.jsx)("h3",{style:{marginBottom:8},children:"المحادثة"}),(0,s.jsx)("ul",{children:(r.messages||[]).map((e,i)=>(0,s.jsxs)("li",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:[e.at," — ",e.message]},i))})]})]}):(0,s.jsx)("main",{children:"Loading…"})}}},function(e){e.O(0,[64,694,744],function(){return e(e.s=6134)}),_N_E=e.O()}]);