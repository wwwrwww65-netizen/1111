(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40],{1676:function(e,t,d){Promise.resolve().then(d.bind(d,9288))},9288:function(e,t,d){"use strict";d.r(t),d.d(t,{default:function(){return o}});var i=d(875),r=d(5393);function o(){let[e,t]=r.useState([]),[d,o]=r.useState(""),[s,n]=r.useState(""),[l,a]=r.useState(""),[c,p]=r.useState(1);async function h(){let e=new URL(window.location.origin+"/api/admin/tickets");e.searchParams.set("page",String(c)),e.searchParams.set("limit","20"),s&&e.searchParams.set("status",s),l&&e.searchParams.set("search",l),t((await (await fetch(e.toString())).json()).tickets||[])}async function x(){await fetch("/api/admin/tickets",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({subject:d})}),o(""),await h()}return r.useEffect(()=>{h()},[c]),(0,i.jsxs)("main",{children:[(0,i.jsx)("h1",{style:{marginBottom:16},children:"الدعم"}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12},children:[(0,i.jsxs)("select",{value:s,onChange:e=>n(e.target.value),style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"},children:[(0,i.jsx)("option",{value:"",children:"الكل"}),(0,i.jsx)("option",{value:"OPEN",children:"مفتوحة"}),(0,i.jsx)("option",{value:"IN_PROGRESS",children:"جارية"}),(0,i.jsx)("option",{value:"CLOSED",children:"مغلقة"})]}),(0,i.jsx)("input",{value:l,onChange:e=>a(e.target.value),placeholder:"بحث بالموضوع",style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,i.jsx)("button",{onClick:()=>{p(1),h()},style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"بحث"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:12},children:[(0,i.jsx)("input",{value:d,onChange:e=>o(e.target.value),placeholder:"الموضوع",style:{padding:8,borderRadius:8,background:"#0b0e14",border:"1px solid #1c2333",color:"#e2e8f0"}}),(0,i.jsx)("button",{onClick:x,style:{padding:"8px 12px",background:"#111827",color:"#e5e7eb",borderRadius:8},children:"إنشاء"})]}),(0,i.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"#"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الموضوع"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الحالة"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"الأولوية"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8},children:"المستخدم"}),(0,i.jsx)("th",{style:{textAlign:"right",borderBottom:"1px solid #1c2333",padding:8}})]})}),(0,i.jsx)("tbody",{children:e.map(e=>{var t;return(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.id.slice(0,6)}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.subject}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.status}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:e.priority}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:(null===(t=e.user)||void 0===t?void 0:t.email)||"-"}),(0,i.jsx)("td",{style:{padding:8,borderBottom:"1px solid #1c2333"},children:(0,i.jsx)("a",{href:"/tickets/".concat(e.id),style:{padding:"6px 10px",background:"#374151",color:"#e5e7eb",borderRadius:6},children:"تفاصيل"})})]},e.id)})})]})]})}}},function(e){e.O(0,[64,694,744],function(){return e(e.s=1676)}),_N_E=e.O()}]);