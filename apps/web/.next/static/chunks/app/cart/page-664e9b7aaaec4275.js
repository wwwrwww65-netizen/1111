(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{7416:function(e,t,n){Promise.resolve().then(n.bind(n,652))},652:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(875),s=n(1696);function a(){var e;let t=s.S,{data:n,isLoading:a,error:i,refetch:c}=t.cart.getCart.useQuery(),l=t.cart.updateItem.useMutation({onSuccess:()=>c()}),d=t.cart.removeItem.useMutation({onSuccess:()=>c()});if(a)return(0,r.jsx)("main",{className:"p-8",children:"Loading cart..."});if(i)return(0,r.jsxs)("main",{className:"p-8",children:["Error: ",i.message]});let o=null==n?void 0:n.cart,u=null!==(e=null==n?void 0:n.subtotal)&&void 0!==e?e:0;return(0,r.jsxs)("main",{className:"min-h-screen p-4 md:p-8 max-w-6xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold mb-6",children:"سلة التسوق"}),o&&0!==o.items.length?(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[(0,r.jsx)("div",{className:"md:col-span-2 space-y-4",children:o.items.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between border p-4 rounded gap-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-semibold line-clamp-1",children:e.product.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-600",children:["$",e.product.price]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{className:"px-2 py-1 border rounded","aria-label":"decrease",onClick:()=>l.mutate({productId:e.productId,quantity:Math.max(0,e.quantity-1)}),children:"-"}),(0,r.jsx)("span",{className:"min-w-[28px] text-center",children:e.quantity}),(0,r.jsx)("button",{className:"px-2 py-1 border rounded","aria-label":"increase",onClick:()=>l.mutate({productId:e.productId,quantity:e.quantity+1}),children:"+"}),(0,r.jsx)("button",{className:"ml-2 px-3 py-1 border rounded",onClick:()=>d.mutate({productId:e.productId}),children:"إزالة"})]})]},e.id))}),(0,r.jsxs)("aside",{className:"border rounded p-4 h-fit sticky top-24",children:[(0,r.jsx)("div",{className:"text-lg font-semibold mb-2",children:"ملخص الطلب"}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,r.jsx)("span",{children:"الإجمالي الفرعي"}),(0,r.jsxs)("span",{children:["$",u.toFixed(2)]})]}),(0,r.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-1",children:[(0,r.jsx)("span",{children:"الشحن"}),(0,r.jsx)("span",{children:"—"})]}),(0,r.jsxs)("div",{className:"flex justify-between text-base font-semibold mt-3",children:[(0,r.jsx)("span",{children:"الإجمالي"}),(0,r.jsxs)("span",{children:["$",u.toFixed(2)]})]}),(0,r.jsx)("a",{href:"/checkout",className:"mt-4 block text-center px-4 py-2 bg-black text-white rounded",children:"إتمام الشراء"})]})]}):(0,r.jsx)("p",{children:"السلة فارغة"}),o&&o.items.length>0&&(0,r.jsxs)("div",{className:"md:hidden fixed bottom-0 left-0 right-0 border-t bg-white p-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm",children:["الإجمالي: ",(0,r.jsxs)("b",{children:["$",u.toFixed(2)]})]}),(0,r.jsx)("a",{href:"/checkout",className:"px-4 py-2 bg-black text-white rounded",children:"إتمام"})]})]})}n(5393)},1696:function(e,t,n){"use strict";n.d(t,{AppProviders:function(){return m},S:function(){return u}});var r=n(875),s=n(1151),a=n(6619),i=n(1558),c=n(8028),l=n(5393),d=n(9764),o=n(5009);let u=(0,c.ec)();function m(e){let{children:t}=e,[n]=l.useState(()=>new s.S),[c]=l.useState(()=>{let e=o.env.NEXT_PUBLIC_TRPC_URL;return e||(e=window.location.hostname.endsWith("onrender.com")?"https://jeeeyai.onrender.com/trpc":"http://localhost:4000/trpc"),u.createClient({links:[(0,i.u_)({condition:e=>"query"===e.type,true:(0,i.ch)({url:e,method:"GET",fetch:(e,t)=>fetch(e,{...null!=t?t:{},credentials:"include"})}),false:(0,i.N8)({url:e,fetch:(e,t)=>fetch(e,{...null!=t?t:{},credentials:"include"})})})]})});return(0,r.jsx)(u.Provider,{client:c,queryClient:n,children:(0,r.jsx)(a.aH,{client:n,children:(0,r.jsx)(d.bd,{children:t})})})}},9764:function(e,t,n){"use strict";n.d(t,{QT:function(){return l},bd:function(){return c},lL:function(){return d}});var r=n(875),s=n(5393);let a={home:{ar:"الرئيسية",en:"Home"},categories:{ar:"التصنيفات",en:"Categories"},search:{ar:"البحث",en:"Search"},account:{ar:"حسابي",en:"Account"},cart:{ar:"سلة التسوق",en:"Cart"},wishlist:{ar:"المفضلة",en:"Wishlist"},checkout:{ar:"الدفع",en:"Checkout"},notFound:{ar:"الصفحة غير موجودة",en:"Page not found"},backHome:{ar:"العودة للرئيسية",en:"Back to home"},description:{ar:"الوصف",en:"Description"},specs:{ar:"المواصفات",en:"Specifications"},reviews:{ar:"التقييمات",en:"Reviews"},shipping:{ar:"الشحن",en:"Shipping"},returns:{ar:"الإرجاع",en:"Returns"},apply:{ar:"تطبيق",en:"Apply"},coupon:{ar:"كوبون",en:"Coupon"},size:{ar:"المقاس",en:"Size"},addToCart:{ar:"أضف إلى السلة",en:"Add to cart"}},i=s.createContext(void 0);function c(e){let{children:t}=e,[n,c]=s.useState(()=>"en"===(new URLSearchParams(window.location.search).get("lang")||localStorage.getItem("locale")||"ar")?"en":"ar"),l=s.useCallback(e=>{c(e),localStorage.setItem("locale",e)},[]),d=s.useMemo(()=>({locale:n,dir:"ar"===n?"rtl":"ltr",setLocale:l,t:e=>{var t,r;return null!==(r=null===(t=a[e])||void 0===t?void 0:t[n])&&void 0!==r?r:e}}),[n,l]);return(0,r.jsx)(i.Provider,{value:d,children:t})}function l(){let e=s.useContext(i);if(!e)throw Error("useI18n must be used within I18nProvider");return e}function d(){let{locale:e,dir:t}=l();return s.useEffect(()=>{"undefined"!=typeof document&&(document.documentElement.lang=e,document.documentElement.dir=t)},[e,t]),null}}},function(e){e.O(0,[722,64,694,744],function(){return e(e.s=7416)}),_N_E=e.O()}]);