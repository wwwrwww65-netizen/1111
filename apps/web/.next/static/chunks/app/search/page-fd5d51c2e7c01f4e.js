(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{5452:function(e,i,n){Promise.resolve().then(n.bind(n,3168))},3168:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return l}});var a=n(875),r=n(1696),t=n(5393),s=n(9e3),o=n(9764);function l(){var e;let{t:i}=(0,o.QT)(),n=r.S,l=new URLSearchParams(window.location.search),d=l.get("categoryId")||void 0,c=l.get("q")||void 0,[u,p]=t.useState(c),[h,x]=t.useState(d),[v,m]=t.useState(void 0),[g,b]=t.useState(void 0),[j,N]=t.useState(void 0),[f,w]=t.useState(void 0),[y,C]=t.useState(void 0),{data:k,isLoading:S,error:_,refetch:E}=n.search.searchProducts.useQuery({categoryId:h,query:u,minPrice:v,maxPrice:g,inStock:j,sortBy:f,sortOrder:y,page:1,limit:20});if(S)return(0,a.jsx)("main",{className:"p-8",children:"Loading..."});if(_)return(0,a.jsxs)("main",{className:"p-8",children:["Error: ",_.message]});let P=null!==(e=null==k?void 0:k.products)&&void 0!==e?e:[];return(0,a.jsxs)("main",{className:"min-h-screen p-4 md:p-8 max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"البحث"}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-6 gap-3",children:[(0,a.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"ابحث...",value:u||"",onChange:e=>p(e.target.value||void 0)}),(0,a.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"السعر الأدنى",type:"number",onChange:e=>m(e.target.value?Number(e.target.value):void 0)}),(0,a.jsx)("input",{className:"border rounded px-3 py-2",placeholder:"السعر الأعلى",type:"number",onChange:e=>b(e.target.value?Number(e.target.value):void 0)}),(0,a.jsxs)("select",{className:"border rounded px-3 py-2",onChange:e=>N(""===e.target.value?void 0:"in"===e.target.value),children:[(0,a.jsx)("option",{value:"",children:"التوفر"}),(0,a.jsx)("option",{value:"in",children:"متوفر"}),(0,a.jsx)("option",{value:"out",children:"غير متوفر"})]}),(0,a.jsxs)("select",{className:"border rounded px-3 py-2",onChange:e=>w(e.target.value||void 0),children:[(0,a.jsx)("option",{value:"",children:"الترتيب"}),(0,a.jsx)("option",{value:"createdAt",children:"الأحدث"}),(0,a.jsx)("option",{value:"name",children:"الاسم"}),(0,a.jsx)("option",{value:"price",children:"السعر"}),(0,a.jsx)("option",{value:"rating",children:"التقييم"})]}),(0,a.jsxs)("select",{className:"border rounded px-3 py-2",onChange:e=>C(e.target.value||void 0),children:[(0,a.jsx)("option",{value:"",children:"اتجاه"}),(0,a.jsx)("option",{value:"asc",children:"تصاعدي"}),(0,a.jsx)("option",{value:"desc",children:"تنازلي"})]}),(0,a.jsx)("button",{className:"md:col-span-6 px-4 py-2 bg-black text-white rounded",onClick:()=>E(),children:"تطبيق"})]}),(0,a.jsxs)("div",{className:"md:hidden flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar",children:[(0,a.jsx)("button",{className:"px-3 py-1.5 rounded-full border ".concat(j?"bg-black text-white":"bg-white"),onClick:()=>N(!j||void 0),children:"متوفر"}),(0,a.jsx)("button",{className:"px-3 py-1.5 rounded-full border ".concat(!1===j?"bg-black text-white":"bg-white"),onClick:()=>N(!1===j&&void 0),children:"غير متوفر"}),(0,a.jsx)("button",{className:"px-3 py-1.5 rounded-full border ".concat("price"===f?"bg-black text-white":"bg-white"),onClick:()=>w("price"===f?void 0:"price"),children:"السعر"})]}),(0,a.jsxs)("select",{className:"border rounded px-3 py-2",onChange:e=>w(e.target.value||void 0),children:[(0,a.jsx)("option",{value:"",children:"الترتيب"}),(0,a.jsx)("option",{value:"createdAt",children:"الأحدث"}),(0,a.jsx)("option",{value:"price",children:"السعر"})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:P.map(e=>(0,a.jsx)(s.Il,{product:{id:e.id,name:e.name,description:e.description,price:e.price,images:e.images,stock:e.stockQuantity,rating:e.rating||0,reviewCount:e.reviewCount||0},onViewDetails:e=>window.location.href="/products/".concat(e)},e.id))})]})}}},function(e){e.O(0,[722,157,64,694,744],function(){return e(e.s=5452)}),_N_E=e.O()}]);