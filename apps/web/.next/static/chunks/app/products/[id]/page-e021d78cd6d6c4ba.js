(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[351],{6215:function(e,s,t){Promise.resolve().then(t.bind(t,5388))},5388:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return d}});var a=t(875),i=t(1696),c=t(8944),n=t(5393),r=t(9e3),l=t(9764);function d(e){let{params:s}=e,{t}=(0,l.QT)(),{data:r,isLoading:d,error:m}=i.S.products.getById.useQuery({id:s.id}),x=i.S.cart.addItem.useMutation(),[u,p]=n.useState(0),[h,b]=n.useState(1),[j,g]=n.useState("desc"),[v,N]=n.useState(null),[f,w]=n.useState(!1),[y,k]=n.useState(!1);if(d)return(0,a.jsx)("main",{className:"p-8",children:"Loading product..."});if(m)return(0,a.jsxs)("main",{className:"p-8",children:["Error: ",m.message]});if(!r)return(0,a.jsx)("main",{className:"p-8",children:"Not found"});let C=r.images&&r.images.length?r.images:["/placeholder-product.jpg"];return(0,a.jsxs)("main",{className:"min-h-screen p-4 md:p-8 max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10 items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"relative w-full aspect-square bg-gray-100 rounded",children:(0,a.jsx)(c.default,{src:C[u],alt:r.name,fill:!0,className:"object-cover rounded",sizes:"(max-width:768px) 100vw, 50vw"})}),(0,a.jsx)("div",{className:"mt-3 grid grid-cols-5 gap-2",children:C.slice(0,5).map((e,s)=>(0,a.jsx)("button",{onClick:()=>p(s),className:"relative w-full aspect-square rounded overflow-hidden border ".concat(s===u?"border-black":"border-transparent"),"aria-label":"thumbnail-".concat(s),children:(0,a.jsx)(c.default,{src:e,alt:"".concat(r.name,"-").concat(s),fill:!0,className:"object-cover"})},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl md:text-3xl font-bold",children:r.name}),(0,a.jsxs)("div",{className:"text-rose-600 text-xl md:text-2xl font-semibold mt-3",children:["$",r.price]}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:r.stockQuantity>0?"".concat(r.stockQuantity," متوفر"):"غير متوفر"}),(0,a.jsxs)("div",{className:"mt-5 border-b flex items-center gap-6 text-sm",children:[(0,a.jsx)("button",{className:"pb-2 ".concat("desc"===j?"border-b-2 border-black":""),onClick:()=>g("desc"),children:t("description")}),(0,a.jsx)("button",{className:"pb-2 ".concat("specs"===j?"border-b-2 border-black":""),onClick:()=>g("specs"),children:t("specs")}),(0,a.jsx)("button",{className:"pb-2 ".concat("reviews"===j?"border-b-2 border-black":""),onClick:()=>g("reviews"),children:t("reviews")})]}),"desc"===j&&(0,a.jsx)("p",{className:"text-gray-700 mt-4 leading-relaxed",children:r.description}),"specs"===j&&(0,a.jsxs)("div",{className:"mt-4",children:[r.variants&&r.variants.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:t("size")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:r.variants.map(e=>(0,a.jsx)("button",{onClick:()=>N(e.name),className:"px-3 py-1.5 border rounded ".concat(v===e.name?"border-black bg-black text-white":"bg-white"),children:e.name},e.id))})]}),(0,a.jsx)("ul",{className:"space-y-1 text-sm text-gray-600 list-disc pr-5",children:(r.specs||[]).map((e,s)=>(0,a.jsx)("li",{children:"string"==typeof e?e:"".concat(e.name,": ").concat(e.value)},s))})]}),"reviews"===j&&(0,a.jsxs)("div",{className:"mt-4 text-sm text-gray-700",children:["التقييم العام: ",r.averageRating," (",r.reviewCount," تقييم)"]}),(0,a.jsxs)("div",{className:"mt-6 flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center border rounded",children:[(0,a.jsx)("button",{className:"px-3 py-2",onClick:()=>b(e=>Math.max(1,e-1)),"aria-label":"decrease",children:"-"}),(0,a.jsx)("div",{className:"px-4 py-2 min-w-[48px] text-center select-none",children:h}),(0,a.jsx)("button",{className:"px-3 py-2",onClick:()=>b(e=>e+1),"aria-label":"increase",children:"+"})]}),(0,a.jsx)("button",{disabled:r.stockQuantity<=0||x.isLoading,onClick:async()=>{await x.mutateAsync({productId:r.id,quantity:h}),window.location.href="/cart"},className:"px-5 py-3 bg-black text-white rounded disabled:opacity-50",children:t("addToCart")})]}),(0,a.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,a.jsxs)("div",{className:"border rounded",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between px-3 py-2 text-sm",onClick:()=>w(e=>!e),children:[(0,a.jsx)("span",{children:t("shipping")}),(0,a.jsx)("span",{children:f?"−":"+"})]}),f&&(0,a.jsx)("div",{className:"px-3 pb-3 text-sm text-gray-600",children:"شحن خلال 2-5 أيام عمل. تتبع فوري عند الشحن."})]}),(0,a.jsxs)("div",{className:"border rounded",children:[(0,a.jsxs)("button",{className:"w-full flex items-center justify-between px-3 py-2 text-sm",onClick:()=>k(e=>!e),children:[(0,a.jsx)("span",{children:t("returns")}),(0,a.jsx)("span",{children:y?"−":"+"})]}),y&&(0,a.jsx)("div",{className:"px-3 pb-3 text-sm text-gray-600",children:"إرجاع خلال 15 يومًا وفق الشروط."})]})]})]})]}),(0,a.jsxs)("div",{className:"md:hidden fixed bottom-0 inset-x-0 border-t bg-white p-3 flex items-center justify-between z-40",children:[(0,a.jsxs)("div",{className:"text-sm",children:["$",r.price]}),(0,a.jsx)("button",{className:"px-4 py-2 bg-black text-white rounded",onClick:async()=>{await x.mutateAsync({productId:r.id,quantity:1}),window.location.href="/cart"},children:t("addToCart")})]}),(0,a.jsxs)("section",{className:"mt-12",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold mb-4",children:"منتجات مقترحة"}),(0,a.jsx)(o,{})]})]})}function o(){var e;let{data:s}=i.S.products.list.useQuery({limit:10}),t=null!==(e=null==s?void 0:s.items)&&void 0!==e?e:[];return(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:t.map(e=>(0,a.jsx)(r.Il,{product:{id:e.id,name:e.name,description:e.description,price:e.price,images:e.images,stock:e.stockQuantity,rating:e.averageRating||0,reviewCount:e.reviewCount||0},onViewDetails:e=>window.location.href="/products/".concat(e)},e.id))})}}},function(e){e.O(0,[722,944,157,64,694,744],function(){return e(e.s=6215)}),_N_E=e.O()}]);